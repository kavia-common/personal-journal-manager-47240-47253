{"is_source_file": true, "format": "JavaScript", "description": "This file is an API client module for the Journal Frontend application, providing functions for authentication and journal entry CRUD operations, handling API base URL resolution, token management, and HTTP responses.", "external_files": ["/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js"], "external_methods": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "fetch"], "published": ["api", "api.login", "api.register", "api.me", "api.logout", "api.listEntries", "api.createEntry", "api.updateEntry", "api.deleteEntry", "api.getApiBase"], "classes": [], "methods": [{"name": "resolveBaseUrl", "description": "Determines the API base URL based on environment variables and window environment, defaulting to http://localhost:3001."}, {"name": "getToken", "description": "Retrieves the stored authentication token from localStorage."}, {"name": "setToken", "description": "Stores or removes the authentication token in localStorage."}, {"name": "buildHeaders", "description": "Constructs headers with Content-Type and optional Authorization token."}, {"name": "handleResponse", "description": "Processes fetch responses, parses JSON, and throws errors for HTTP errors."}, {"name": "createEntry({ title, content })", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "deleteEntry(id)", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "getApiBase()", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "listEntries()", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "login({ email, password })", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "logout()", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "me()", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "register({ email, password, name })", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "updateEntry(id, { title, content })", "scope": "api", "scopeKind": "class", "description": "unavailable"}], "calls": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "fetch", "handleResponse"], "search-terms": ["API client", "auth token management", "journal CRUD functions", "resolveBaseUrl", "fetch wrappers", "React environment variables", "localStorage auth"], "state": 2, "file_id": 13, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^const API_BASE = resolveBaseUrl();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^    \"Content-Type\": \"application\\/json\",$/", "language": "JavaScript", "kind": "property", "scope": "headers", "scopeKind": "class"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^export const api = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  const body = isJson ? await res.json().catch(() => ({})) : await res.text();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "buildHeaders", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^const buildHeaders = (authorized = false) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  const contentType = res.headers.get(\"content-type\") || \"\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createEntry", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  async createEntry({ title, content }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ title, content })", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "deleteEntry", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  async deleteEntry(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "envBase", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  const envBase =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^    const err = new Error(message);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  getApiBase() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "getToken", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^const getToken = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleResponse", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^const handleResponse = async (res) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  const headers = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "isJson", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  const isJson = contentType.includes(\"application\\/json\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "listEntries", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  async listEntries() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  async login({ email, password }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ email, password })", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  logout() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  async me() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^    const message = isJson && body && body.detail ? body.detail : res.statusText || \"Request fai/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  async register({ email, password, name }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ email, password, name })", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "resolveBaseUrl", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^const resolveBaseUrl = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "runtimeEnv", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  const runtimeEnv = typeof window !== \"undefined\" && window.ENV ? window.ENV : {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setToken", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^const setToken = (token) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^    const token = getToken();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateEntry", "path": "/home/kavia/workspace/code-generation/personal-journal-manager-47240-47253/journal_frontend/src/api/client.js", "pattern": "/^  async updateEntry(id, { title, content }) {$/", "language": "JavaScript", "kind": "method", "signature": "(id, { title, content })", "scope": "api", "scopeKind": "class"}], "hash": "e6be91643a5e42ee095af42bb817f899", "format-version": 4, "code-base-name": "journal_frontend", "filename": "journal_frontend/src/api/client.js", "fields": [{"name": "\"Content-Type\": \"application\\/json\",", "scope": "headers", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"27": ""}]}